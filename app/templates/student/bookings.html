{% extends "/student/student_base.html" %}
{% block title %}- My Bookings {% endblock %}
{% block content %}
    <style>    
        /* Content Sections */
        .content-section {
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .section-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(120, 119, 198, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
        }

        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 5px;
            background: rgba(20, 20, 30, 0.5);
            border-radius: 12px;
            padding: 5px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab-btn {
            padding: 10px 20px;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Booking Cards */
        .bookings-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .booking-card {
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
        }

        .booking-card:hover {
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .booking-info {
            flex: 1;
        }

        .booking-ref {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0 0 5px 0;
        }

        .booking-date {
            color: var(--text-light);
            font-size: 0.9rem;
            margin: 0;
        }

        .booking-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-confirmed {
            background: rgba(34, 197, 94, 0.2);
            color: rgb(34, 197, 94);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status-pending {
            background: rgba(249, 115, 22, 0.2);
            color: rgb(249, 115, 22);
            border: 1px solid rgba(249, 115, 22, 0.3);
        }

        .status-cancelled {
            background: rgba(239, 68, 68, 0.2);
            color: rgb(239, 68, 68);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .status-completed {
            background: rgba(59, 130, 246, 0.2);
            color: rgb(59, 130, 246);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .booking-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .detail-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detail-label {
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text);
        }

        .detail-value.price {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .booking-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Payment Status */
        .payment-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .payment-paid {
            background: rgba(34, 197, 94, 0.2);
            color: rgb(34, 197, 94);
        }

        .payment-pending {
            background: rgba(249, 115, 22, 0.2);
            color: rgb(249, 115, 22);
        }

        .payment-failed {
            background: rgba(239, 68, 68, 0.2);
            color: rgb(239, 68, 68);
        }

        /* Timeline */
        .booking-timeline {
            position: relative;
            padding-left: 20px;
            margin-top: 15px;
        }

        .booking-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: rgba(255, 255, 255, 0.1);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 15px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 6px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary);
        }

        .timeline-item.completed::before {
            background: #10b981;
        }

        .timeline-item.pending::before {
            background: #f59e0b;
        }

        .timeline-date {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 2px;
        }

        .timeline-text {
            font-size: 0.9rem;
            color: var(--text);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--text);
        }

        .empty-state p {
            margin-bottom: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .booking-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .booking-details {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .booking-actions {
                flex-direction: column;
                width: 100%;
            }
            
            .booking-actions .btn {
                justify-content: center;
            }
            
            .filter-tabs {
                flex-direction: column;
            }
            
            .search-box input {
                width: 180px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 480px) {
            .booking-card {
                padding: 20px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .section-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <button class="mobile-menu-toggle" id="mobileMenuToggle">â˜°</button>
            <div class="page-title">
                <h1>My Bookings</h1>
                <p>Manage your hostel bookings and track their status</p>
            </div>
            <div class="header-actions">
                <div class="search-box">
                    <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <input type="text" id="searchInput" placeholder="Search bookings...">
                </div>
                <div class="notification-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="notification-badge">{{ notifications_count }}</div>
                </div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
            <button class="tab-btn active" onclick="filterBookings('all')">All Bookings</button>
            <button class="tab-btn" onclick="filterBookings('pending')">Pending</button>
            <button class="tab-btn" onclick="filterBookings('confirmed')">Confirmed</button>
            <button class="tab-btn" onclick="filterBookings('cancelled')">Cancelled</button>
            <button class="tab-btn" onclick="filterBookings('completed')">Completed</button>
        </div>

        <!-- Bookings Container -->
        <div class="bookings-container" id="bookingsContainer">
            {% for booking in bookings %}
            <div class="booking-card" data-booking-status="{{ booking.booking_status.lower() }}">
                <div class="booking-header">
                    <div class="booking-info">
                        <h3 class="booking-ref">{{ booking.booking_reference_number }}</h3>
                        <p class="booking-date">Booked on {{ booking.booking_date.strftime('%B %d, %Y') }}</p>
                    </div>
                    <span class="booking-status status-{{ booking.booking_status.lower() }}">
                        {{ booking.booking_status }}
                    </span>
                </div>

                <div class="booking-details">
                    <div class="detail-group">
                        <span class="detail-label">Room</span>
                        <span class="detail-value">{{ booking.room_number }} - {{ booking.hostel_name }}</span>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Room Type</span>
                        <span class="detail-value">{{ booking.room_type }}</span>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Amount</span>
                        <span class="detail-value price">Ksh {{ booking.room_price_per_sem }}</span>
                    </div>
                    <div class="detail-group">
                        <span class="detail-label">Payment Status</span>
                        <span class="payment-status payment-{{ booking.payment_status.lower() if booking.payment_status else 'pending' }}">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                {% if booking.payment_status == 'Success' %}
                                <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                {% elif booking.payment_status == 'Failed' %}
                                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                {% else %}
                                <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                {% endif %}
                            </svg>
                            {{ booking.payment_status or 'Pending' }}
                        </span>
                    </div>
                </div>

                <!-- Timeline for Confirmed Bookings -->
                {% if booking.booking_status == 'Confirmed' and booking.allocation_date %}
                <div class="booking-timeline">
                    <div class="timeline-item completed">
                        <div class="timeline-date">{{ booking.booking_date.strftime('%b %d, %Y') }}</div>
                        <div class="timeline-text">Booking Request Submitted</div>
                    </div>
                    <div class="timeline-item completed">
                        <div class="timeline-date">{{ booking.allocation_date.strftime('%b %d, %Y') }}</div>
                        <div class="timeline-text">Room Allocated</div>
                    </div>
                    <div class="timeline-item {% if booking.days_remaining <= 7 %}pending{% else %}completed{% endif %}">
                        <div class="timeline-date">{{ booking.allocation_vaccate_date.strftime('%b %d, %Y') if booking.allocation_vaccate_date else 'TBD' }}</div>
                        <div class="timeline-text">
                            Check-out Date
                            {% if booking.days_remaining %}
                            <small style="color: var(--text-light);">({{ booking.days_remaining }} days remaining)</small>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <div class="booking-actions">
                    {% if booking.booking_status == 'Pending' %}
                    <button class="btn btn-primary" onclick="makePayment('{{ booking.booking_id }}')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19.4 15C19.2669 15.3044 19.1343 15.6087 19.0001 15.913C18.509 16.8954 17.8381 17.7487 17.0715 18.5153C15.6094 19.9774 13.695 20.761 11.7885 20.925C10.6824 21.0212 9.56619 20.8859 8.51563 20.5156C7.46506 20.1453 6.50492 19.5487 5.69697 18.7578C4.10469 17.1655 3.23828 15.0656 3.075 12.7885C2.91172 10.5114 3.52266 8.39063 4.875 6.75C5.46094 6.03281 6.15469 5.41406 6.9375 4.92188" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 4.5V12L15.375 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Make Payment
                    </button>
                    <button class="btn btn-danger" onclick="cancelBooking('{{ booking.booking_id }}')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Cancel Booking
                    </button>
                    {% if booking.payment_status != 'Success' %}
                    <button class="btn btn-warning" onclick="makePayment('{{ booking.booking_id }}')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19.4 15C19.2669 15.3044 19.1343 15.6087 19.0001 15.913C18.509 16.8954 17.8381 17.7487 17.0715 18.5153C15.6094 19.9774 13.695 20.761 11.7885 20.925C10.6824 21.0212 9.56619 20.8859 8.51563 20.5156C7.46506 20.1453 6.50492 19.5487 5.69697 18.7578C4.10469 17.1655 3.23828 15.0656 3.075 12.7885C2.91172 10.5114 3.52266 8.39063 4.875 6.75C5.46094 6.03281 6.15469 5.41406 6.9375 4.92188" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 4.5V12L15.375 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Pay Now
                    </button>
                    {% endif %}
                    {% endif %}
                    
                    <button class="btn btn-outline" onclick="downloadReceipt('{{ booking.booking_id }}')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Receipt
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Empty State -->
        {% if not bookings %}
        <div class="empty-state">
            <div class="empty-state-icon">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <h3>No Bookings Found</h3>
            <p>You haven't made any bookings yet. Start by exploring available rooms and make your first booking.</p>
            <a href="/student/rooms" class="btn btn-primary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Browse Available Rooms
            </a>
        </div>
        {% endif %}
    </div>

    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const mobileToggle = document.getElementById('mobileMenuToggle');
            
            if (window.innerWidth <= 1024 && 
                !sidebar.contains(event.target) && 
                !mobileToggle.contains(event.target) &&
                sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
        });

        // Filter bookings by status
        function filterBookings(status) {
            // Update active tab
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Filter bookings
            const bookings = document.querySelectorAll('.booking-card');
            let visibleCount = 0;
            
            bookings.forEach(booking => {
                const bookingStatus = booking.getAttribute('data-booking-status');
                
                if (status === 'all' || bookingStatus === status) {
                    booking.style.display = 'block';
                    visibleCount++;
                } else {
                    booking.style.display = 'none';
                }
            });
            
            // Show empty state if no bookings match
            const emptyState = document.querySelector('.empty-state');
            const bookingsContainer = document.getElementById('bookingsContainer');
            
            if (visibleCount === 0 && emptyState) {
                emptyState.style.display = 'block';
            } else if (emptyState) {
                emptyState.style.display = 'none';
            }
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const bookings = document.querySelectorAll('.booking-card');
            let visibleCount = 0;
            
            bookings.forEach(booking => {
                const bookingText = booking.textContent.toLowerCase();
                
                if (bookingText.includes(searchTerm)) {
                    booking.style.display = 'block';
                    visibleCount++;
                } else {
                    booking.style.display = 'none';
                }
            });
        });

        // Make payment
        function makePayment(bookingId) {
            // Redirect to payment page
            window.location.href = `/student/payments?booking_id=${bookingId}`;
        }

        // Cancel booking
        function cancelBooking(bookingId) {
            if (confirm('Are you sure you want to cancel this booking? This action cannot be undone.')) {
                fetch(`/student/bookings/${bookingId}/cancel`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Booking cancelled successfully!');
                        location.reload();
                    } else {
                        alert('Error: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while cancelling the booking.');
                });
            }
        }

        // View booking details
        function viewBookingDetails(bookingId) {
            // Redirect to details page
            window.location.href = `/student/bookings/${bookingId}`;
        }

        // Download receipt
        function downloadReceipt(bookingId) {
            // Generate and download receipt
            window.open(`/student/bookings/${bookingId}/receipt`, '_blank');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialization code will be added here
        });
    </script>
{% endblock %}