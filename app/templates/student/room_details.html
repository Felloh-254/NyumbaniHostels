{% extends "/student/student_base.html" %}
{% block title %}- Room {{ room.room_number }} {% endblock %}
{% block content %}
    <style>    
        /* Room Details Styles */
        .room-details-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .back-button {
            margin-bottom: 20px;
        }

        .room-gallery {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
            height: 400px;
        }

        .main-image {
            border-radius: 12px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
        }

        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail-grid {
            display: grid;
            grid-template-rows: 1fr 1fr;
            gap: 15px;
        }

        .thumbnail {
            border-radius: 8px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .thumbnail:hover img {
            transform: scale(1.05);
        }

        .image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
        }

        .room-info-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .room-details {
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px;
        }

        .room-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .room-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            flex: 1;
        }

        .room-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0;
        }

        .availability-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .available {
            background: rgba(34, 197, 94, 0.2);
            color: rgb(34, 197, 94);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .occupied {
            background: rgba(239, 68, 68, 0.2);
            color: rgb(239, 68, 68);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .room-meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .meta-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .meta-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .meta-label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .meta-value {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .room-description {
            margin-bottom: 30px;
        }

        .description-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .description-text {
            color: var(--text-light);
            line-height: 1.6;
        }

        .features-section {
            margin-bottom: 30px;
        }

        .features-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .feature-tag {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-light);
            text-align: center;
        }

        /* Booking Card */
        .booking-card {
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px;
            position: sticky;
            top: 20px;
        }

        .booking-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .booking-details {
            margin-bottom: 25px;
        }

        .booking-detail {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .booking-detail:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .booking-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .btn {
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(120, 119, 198, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* Similar Rooms */
        .similar-rooms {
            margin-top: 50px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .similar-rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .similar-room-card {
            background: rgba(20, 20, 30, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            transition: all 0.3s ease;
        }

        .similar-room-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .similar-room-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .similar-room-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
        }

        .similar-room-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0;
        }

        .similar-room-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .similar-room-actions {
            display: flex;
            gap: 10px;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .room-gallery {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .thumbnail-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: auto;
            }
            
            .room-info-grid {
                grid-template-columns: 1fr;
            }
            
            .booking-card {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .room-meta-grid {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .similar-rooms-grid {
                grid-template-columns: 1fr;
            }
            
            .room-header {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>

    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <button class="mobile-menu-toggle" id="mobileMenuToggle">â˜°</button>
            <div class="page-title">
                <h1>Room Details</h1>
                <p>Complete information about {{ room.room_number }}</p>
            </div>
            <div class="header-actions">
                <div class="search-box">
                    <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <input type="text" placeholder="Search...">
                </div>
                <div class="notification-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <div class="notification-badge">{{ notifications_count }}</div>
                </div>
            </div>
        </div>

        <div class="room-details-container">
            <!-- Back Button -->
            <div class="back-button">
                <a href="{{ url_for('student.available_rooms') }}" class="btn btn-outline">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Back to Rooms
                </a>
            </div>

            <!-- Room Gallery -->
            <div class="room-gallery">
                <div class="main-image" id="mainImage">
                    {% if room_images and room_images[0].image_url %}
                        {% if room_images[0].image_url.startswith('http') %}
                        <img src="{{ room_images[0].image_url }}" alt="{{ room.room_number }}" id="currentImage">
                        {% else %}
                        <img src="{{ url_for('static', filename=room_images[0].image_url) }}" alt="{{ room.room_number }}" id="currentImage">
                        {% endif %}
                    {% else %}
                    <div class="image-placeholder">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    {% endif %}
                </div>
                <div class="thumbnail-grid">
                    {% for image in room_images %}
                    <div class="thumbnail" onclick="changeMainImage('{{ image.image_url if image.image_url.startswith('http') else url_for('static', filename=image.image_url) }}')">
                        {% if image.image_url.startswith('http') %}
                        <img src="{{ image.image_url }}" alt="Room image {{ loop.index }}">
                        {% else %}
                        <img src="{{ url_for('static', filename=image.image_url) }}" alt="Room image {{ loop.index }}">
                        {% endif %}
                    </div>
                    {% endfor %}
                    {% for i in range(4 - room_images|length) %}
                    <div class="thumbnail">
                        <div class="image-placeholder">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Room Information Grid -->
            <div class="room-info-grid">
                <!-- Room Details -->
                <div class="room-details">
                    <div class="room-header">
                        <div>
                            <h2 class="room-title">{{ room.room_number }} - {{ room.hostel_name }}</h2>
                            <p style="color: var(--text-light); margin-top: 5px;">{{ room.hostel_location }}</p>
                        </div>
                        <div style="text-align: right;">
                            <div class="room-price">Ksh {{ room.room_price_per_sem }}</div>
                            <div class="availability-badge {% if room.is_available %}available{% else %}occupied{% endif %}" style="margin-top: 10px;">
                                {% if room.is_available %}Available{% else %}Occupied{% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Room Meta Information -->
                    <div class="room-meta-grid">
                        <div class="meta-card">
                            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="meta-label">Capacity</div>
                            <div class="meta-value">{{ room.room_capacity }} Person{{ 's' if room.room_capacity > 1 else '' }}</div>
                        </div>
                        <div class="meta-card">
                            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L20 7V21H4V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 22V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 12H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="meta-label">Room Type</div>
                            <div class="meta-value">{{ room.room_type }}</div>
                        </div>
                        <div class="meta-card">
                            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 20.5C13.7239 20.5 15.3772 19.8152 16.5962 18.5962C17.8152 17.3772 18.5 15.7239 18.5 14C18.5 12.2761 17.8152 10.6228 16.5962 9.40381C15.3772 8.18482 13.7239 7.5 12 7.5C10.2761 7.5 8.62279 8.18482 7.40381 9.40381C6.18482 10.6228 5.5 12.2761 5.5 14C5.5 15.7239 6.18482 17.3772 7.40381 18.5962C8.62279 19.8152 10.2761 20.5 12 20.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 14V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="meta-label">Location</div>
                            <div class="meta-value">{{ room.hostel_location }}</div>
                        </div>
                        <div class="meta-card">
                            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6C16 7.06087 15.5786 8.07828 14.8284 8.82843C14.0783 9.57857 13.0609 10 12 10C10.9391 10 9.92172 9.57857 9.17157 8.82843C8.42143 8.07828 8 7.06087 8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 12C16 12 22 13 22 17V22H2V17C2 13 8 12 12 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="meta-label">Hostel</div>
                            <div class="meta-value">{{ room.hostel_name }}</div>
                        </div>
                    </div>

                    <!-- Room Description -->
                    <div class="room-description">
                        <h3 class="description-title">Description</h3>
                        <p class="description-text">
                            {{ room.hostel_description or 'This comfortable ' + room.room_type.lower() + ' room in ' + room.hostel_name + ' offers excellent accommodation with all necessary amenities for a pleasant stay. Located in ' + room.hostel_location + ', this room provides a perfect living space for students.' }}
                        </p>
                    </div>

                    <!-- Features -->
                    <div class="features-section">
                        <h3 class="features-title">Amenities & Features</h3>
                        <div class="features-grid">
                            <span class="feature-tag">High-speed WiFi</span>
                            <span class="feature-tag">24/7 Security</span>
                            <span class="feature-tag">Laundry Facility</span>
                            <span class="feature-tag">Study Area</span>
                            <span class="feature-tag">Common Room</span>
                            <span class="feature-tag">Kitchen Access</span>
                            {% if room.room_type == 'Single' %}
                            <span class="feature-tag">Private Bathroom</span>
                            <span class="feature-tag">Personal Space</span>
                            {% elif room.room_type == 'Double' %}
                            <span class="feature-tag">Shared Bathroom</span>
                            <span class="feature-tag">Roommate</span>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Booking Card -->
                <div class="booking-card">
                    <h3 class="booking-title">Book This Room</h3>
                    
                    <div class="booking-details">
                        <div class="booking-detail">
                            <span>Room Price:</span>
                            <span>Ksh {{ room.room_price_per_sem }}</span>
                        </div>
                        <div class="booking-detail">
                            <span>Duration:</span>
                            <span>1 Semester</span>
                        </div>
                        <div class="booking-detail">
                            <span>Status:</span>
                            <span>{% if room.is_available %}Available{% else %}Occupied{% endif %}</span>
                        </div>
                        <div class="booking-detail">
                            <span>Total:</span>
                            <span>Ksh {{ room.room_price_per_sem }}</span>
                        </div>
                    </div>

                    <div class="booking-actions">
                        {% if room.is_available %}
                        <button class="btn btn-success" onclick="bookRoom({{ room.room_id }})">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Book Now
                        </button>
                        {% else %}
                        <button class="btn btn-outline" disabled>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M19.4 15C19.2669 15.3044 19.1343 15.6087 19.0001 15.913C18.509 16.8954 17.8381 17.7487 17.0715 18.5153C15.6094 19.9774 13.695 20.761 11.7885 20.925C10.6824 21.0212 9.56619 20.8859 8.51563 20.5156C7.46506 20.1453 6.50492 19.5487 5.69697 18.7578C4.10469 17.1655 3.23828 15.0656 3.075 12.7885C2.91172 10.5114 3.52266 8.39063 4.875 6.75C5.46094 6.03281 6.15469 5.41406 6.9375 4.92188" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 4.5V12L15.375 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Currently Occupied
                        </button>
                        {% endif %}
                        
                        <a href="{{ url_for('student.available_rooms') }}" class="btn btn-outline">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Browse Other Rooms
                        </a>
                    </div>
                </div>
            </div>

            <!-- Similar Rooms -->
            {% if similar_rooms %}
            <div class="similar-rooms">
                <h3 class="section-title">Similar Rooms in {{ room.hostel_name }}</h3>
                <div class="similar-rooms-grid">
                    {% for similar_room in similar_rooms %}
                    <div class="similar-room-card">
                        <div class="similar-room-header">
                            <h4 class="similar-room-title">{{ similar_room.room_number }}</h4>
                            <div class="similar-room-price">Ksh {{ similar_room.room_price_per_sem }}</div>
                        </div>
                        <div class="similar-room-meta">
                            <span>{{ similar_room.room_type }}</span>
                            <span>{{ similar_room.room_capacity }} Person{{ 's' if similar_room.room_capacity > 1 else '' }}</span>
                        </div>
                        <div class="similar-room-actions">
                            <a href="{{ url_for('student.room_details', room_id=similar_room.room_id) }}" class="btn btn-outline" style="flex: 1;">
                                View Details
                            </a>
                            <button class="btn btn-success" onclick="bookRoom({{ similar_room.room_id }})">
                                Book
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const mobileToggle = document.getElementById('mobileMenuToggle');
            
            if (window.innerWidth <= 1024 && 
                !sidebar.contains(event.target) && 
                !mobileToggle.contains(event.target) &&
                sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
        });

        // Image gallery functionality
        function changeMainImage(imageUrl) {
            const mainImage = document.getElementById('currentImage');
            if (mainImage) {
                mainImage.src = imageUrl;
            }
        }

        // Book room function
        function bookRoom(roomId) {
            if (confirm('Are you sure you want to book this room?')) {
                fetch('/student/bookings/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        room_id: roomId
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Booking request submitted successfully!');
                        window.location.href = '/student/bookings';
                    } else {
                        alert('Error: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while booking the room.');
                });
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Add any initialization code here
        });
    </script>
{% endblock %}